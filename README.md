# LoaSearchBot

## 개요
로스트아크에서 원하는 악세서리를 자동으로 검색하여 알려주는 디스코드 봇 입니다.

희귀한 옵션(직업각인 등)을 일정 주기로 자동으로 검색하여 경매장에 매물이 생길 경우 알려주기 위해 만들었습니다.

## 사용예시
스크린샷 추가예정
1. 디스코드 봇을 통해 사용자가 원하는 악세사리의 옵션을 입력한다.
2. 일정주기(5분) 마다 입력된 옵션을 경매장에 검색한다.
3. 매물이 있을 경우, 등록한 사용자에게 알려준다.

## 파일 설명
- loa.py
  - 12월 7일 공개된 로스트아크 오픈API를 사용 ([공지사항](https://lostark.game.onstove.com/News/Notice/Views/2208)과 [오픈 API 웹사이트](https://developer-lostark.game.onstove.com/))
  - 데이터베이스로 파이썬에 내장된 sqlite3 사용
  - 사용자가 입력한 데이터를 데이터베이스에 저장하고, API를 통해 검색

- loabot.py
  - 디스코드 앱 개발자페이지에서 디스코드 봇 생성 ([웹사이트](https://discord.com/build/app-developers))
  - 파이썬용 디스코드 봇 APIWrapper [Discord.py](https://discordpy.readthedocs.io/en/stable/) 사용 [한글버전](https://discordpy-ko.github.io/)
  - 사용자에게 원하는 데이터를 입력받고, 검색 결과를 알려주기 위해 디스코드 봇 사용

## 그래서 왜 만듬?
1. 로스트아크 오픈 API가 공개되고 관심이 생김
2. "경매장에 매물이 언제 올라올지 모르는 희귀한 악세사리를 자동으로 검색할 수 있으면 좋겠다" 는 이야기를 들음
3. '내가 만들 수 있지 않을까?'라는 생각에 일단 해보기로 결정

## 지금까지 겪은 문제와 예상되는 문제들 (2022.12.30)
- discordpy는 모던API를 지향하며 비동기처리를 기본으로 다루는데, 아직 비동기 처리에 대한 이해가 부족하여 학습이 필요함
- loa.py에서 만든 동기적 처리를 loabot.py에서 만든 비동기 처리와 함께 사용할 경우 문제가 생기는지 확인필요
  - 필요하다면 loa.py를 비동기 처리로 수정하고, request와 sqlite에서 이를 지원하는지 확인
- 사용자에게 데이터를 입력받는 부분을 Dropdown 메뉴로 만들려고 했으나 문제가 생김
  - discord.ui.view는 5이하의 row와 5이하의 width만 사용할 수 있음
  - 1개의 discord.ui.select (dropdown)은 1개의 row와 5로 고정된 width를 사용함
  - 1개의 discord.ui.select (dropdown)은 최대 25개 이하의 option만 사용 가능
  - 25개를 훌쩍 넘기는 각인의 개수와 카테고리, 스탯, 각인, 품질, 등급을 입력해야 하는데 역부족
  - TextInput을 사용할 수 있는 Modal을 만들고, Text를 확인하고 처리하는 작업이 필요해 보임
- API는 1분당 100회의 요청만 처리해주고, Limit을 바꾸려면 API 웹사이트에서 요청해야함
  - 일정 주기(5분) 단위로 API를 요청하기에 너무 많은 데이터(500개 이상)이 쌓이면 어떻게 할 것인지?
- 동시에 많은 사용자가 있을 경우 오류가 생길 가능성을 확인해보고, 이것을 테스트할 방법도 구상
  - 필요한 사람이 직접 Build하여 개인적으로 사용하는 방법도 있음
- 완성도를 어느정도까지 해야 할까?
  1. 다른사람들이 봇을 사용할 수 있도록
  2. 소수의 인원(혹은 내 서버인원)이 봇을 사용할 수 있도록
  3. 나만 사용할 수 있고, 기능이 필요한 사람은 이걸 다운로드하고 직접 구동하여 사용할 수 있도록
  4. 이런 아이디어가 작동가능하다는 것만 확인하고, 안정적인 서비스는 다른사람이 구현하도록
- dicordpy의 examples에서 modal.py 에러(Guild가 무엇인지?)
  - github의 Issue를 사용해보자
- README.md를 보기 좋게 작성하는 방법도 알아보자